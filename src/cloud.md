#Kubernetes
## Docker
### 原理
docker\
docker 其实是宿主机的一个进程，只不过是通过了namespace进行了参数的过滤，
他共享了宿主机的CPU等资源。\
docker是进程隔离，虚拟机是物理隔离\
对于 Docker 等大多数 Linux 容器来说，
Cgroups 技术是用来制造约束的主要手段，而 Namespace 技术则是用来修改进程视图的主要方法。
###优点
“敏捷”和“高性能”是容器相较于虚拟机最大的优势，也是它能够在 PaaS 这种更细粒度的资源管理平台上大行其道的重要原因。\
敏捷是指快速打包，快速发布 高性能是指容器进程本来就是系统里的普通进程，没有虚拟化层的性能损失。 但缺点是没有虚拟化层的隔离性
###隔离
####Namespace 可见性隔离
docker 通过linux的Nmaespace实现了docker的进程隔离
也就是说docker内部的进程编号PID是1但是在宿主机上的进程PID是100.\
进程隔离并不是彻底的隔离?\
1. docker作为一个进程在宿主机中和其他进程是平等，也就是说其他进程可能会吃掉docker的资源，反过来一个docker也会吃掉其他进程的资源
2. Linux中Namespace并不能对所有的文件都做隔离，比如说时间。如果我在一个容器中修改了时间，那么就会影响到宿主机以及宿主机上运行的其他容器
3. 容器的对外安全也是一个问题，恶意攻击可以通过容器攻击宿主机以及宿主机上的其他容器
####Cgroups （限制）资源隔离
Linux Cgroups 的全称是 Linux Control Group。它最主要的作用，就是限制一个进程组能够使用的资源上限，包括 CPU、内存、磁盘、网络带宽等等。
#### Chanroot
更改进程的根目录
#### 问题
1. 同生命周期
   容器是『单进程』模型，只有 PID=1 的进程才会被 Dockerd 控制，即 pid=1 的进程挂了 Dockerd 能够感知到，但是其它的进程却不受 Dockerd 的管理，当出现孤儿进程的时候，管理和调度是个问题
2. /proc 文件系统的问题
   容器中 top 等命令看到的CPU和内存等是宿主机的信息，lxcfs 可解决此问题
#### 核心原理
对 Docker 项目来说，它最核心的原理实际上就是为待创建的用户进程：
1. 启用 Linux Namespace 配置；
2. 设置指定的 Cgroups 参数；
3. 切换进程的根目录（Change Root）。这样，

